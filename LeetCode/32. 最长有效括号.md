## 32. 最长有效括号

给你一个只包含 '(' 和 ')' 的字符串，找出最长有效（格式正确且连续）括号
子串
的长度。

 

示例 1：

>输入：s = "(()"  
>输出：2  
>解释：最长有效括号子串是 "()"  


示例 2：

>输入：s = ")()())"  
>输出：4  
>解释：最长有效括号子串是 "()()"  


示例 3：

>输入：s = ""  
>输出：0  
 

提示：

- 0 <= s.length <= 3 * $10^4$
- s[i] 为 '(' 或 ')'



## 题解

### 解法一、

```java
class Solution {
    // 记录当前左边不能相消的括号
    public int longestValidParentheses(String s) {
        int n = s.length(), top = -1, ans = 0;
        int[] stack = new int[n];
        for (int i = 0; i < n; i++) {
            if (top != -1 && s.charAt(stack[top]) == '(' && s.charAt(i) == ')') {
                top--;
                int left = top != -1? stack[top]: -1;
                ans = Math.max(ans, i - left);
            } else {
                stack[++top] = i;
            }
        }
        return ans;
    }
}
```